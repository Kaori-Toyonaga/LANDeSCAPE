<div class="post_card">
  <p>
    <% if @post.user_id == current_user.id %>
      <span><%= link_to image_tag('edit', size: '25x25'), edit_post_path(@post.id) %></span>
      <span><%= link_to image_tag('delete', size: '25x25'), post_path(@post.id), method: :delete ,data: { confirm: '本当に削除しますか？' } %></span>
    <% else %>
    <% end %>

  <p><%= image_tag(@post.image.url) %></P>
  <p><%= link_to @post.user.name, user_path(@post.user_id) %></P>

    <% unless @post.user_id == current_user.id %>
      <% if @favorite.present? %>
        <%= link_to image_tag('clip_off.png', size: '30x30'), favorite_path(id: @post.id), method: :delete %>
      <% else %>
        <%= link_to image_tag('clip_on.png', size: '30x30'), favorites_path(post_id: @post.id), method: :post %>
      <% end %>
    <% end %>

  <p>
    <span>Spot :</span>
    <span><%= @post.spotname %></span>
  </P>
  <p>
    <span>Area :</span>
    <span><%= @post.prefecture %></span>
  </P>
  <p>
    <span>Address :</span>
    <span><%= @post.address %></span>
  </P>

  <div id="map" style="width: 250px; height: 250px;"></div>
  <script>
    handler = Gmaps.build('Google');
    handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
      markers = handler.addMarkers(<%= raw @map.to_json %>);
      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
    });
  </script>

  <p>
    <span>Map URL :</span>
    <span><%= @post.url %></span>
  </P>
  <p>
    <span>Date :</span>
    <span><%= @post.date %></span>
  </P>
  <div>
    <% @post.tags.each do |tag| %>
      <p><%= tag.title %></p>
    <% end %>
  </div>
  <p></p>
  <p>
    <span>Content :</span>
    <span><%= @post.content %></span>
  </P>
</div>

<p><%= link_to "Back", posts_path %></p>
